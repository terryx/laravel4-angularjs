angular.module("ui.bootstrap",["ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.collapse","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.popover","ui.bootstrap.tabs","ui.bootstrap.tooltip","ui.bootstrap.transition","ui.bootstrap.typeahead"]);angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:true}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(c,a,b){this.groups=[];this.closeOthers=function(e){var d=angular.isDefined(a.closeOthers)?c.$eval(a.closeOthers):b.closeOthers;if(d){angular.forEach(this.groups,function(f){if(f!==e){f.isOpen=false}})}};this.addGroup=function(e){var d=this;this.groups.push(e);e.$on("$destroy",function(f){d.removeGroup(e)})};this.removeGroup=function(e){var d=this.groups.indexOf(e);if(d!==-1){this.groups.splice(this.groups.indexOf(e),1)}}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:true,replace:false,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(b,c,a){return{require:"^accordion",restrict:"EA",transclude:true,replace:true,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(d){this.setHeading=function(e){this.heading=e}}],link:function(i,f,e,h){var d,g;h.addGroup(i);i.isOpen=false;if(e.isOpen){d=b(e.isOpen);g=d.assign;i.$watch(function j(){return d(i.$parent)},function k(l){i.isOpen=l});i.isOpen=d?d(i.$parent):false}i.$watch("isOpen",function(l){if(l){h.closeOthers(i)}if(g){g(i.$parent,l)}})}}}]).directive("accordionHeading",function(){return{restrict:"E",transclude:true,template:"",replace:true,require:"^accordionGroup",compile:function(c,a,b){return function d(g,f,e,h){h.setHeading(b(g,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(d,c,a,b){d.$watch(function(){return b[a.accordionTransclude]},function(e){if(e){c.html("");c.append(e)}})}}});angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:true,replace:true,scope:{type:"=",close:"&"}}});angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(a){var c=a.activeClass||"active";var b=a.toggleEvent||"click";return{require:"ngModel",link:function(g,f,e,d){var h=g.$eval(e.btnRadio);g.$watch(function(){return d.$modelValue},function(i){if(angular.equals(i,h)){f.addClass(c)}else{f.removeClass(c)}});f.bind(b,function(){if(!f.hasClass(c)){g.$apply(function(){d.$setViewValue(h)})}})}}}]).directive("btnCheckbox",["buttonConfig",function(a){var c=a.activeClass||"active";var b=a.toggleEvent||"click";return{require:"ngModel",link:function(h,g,f,e){var d=h.$eval(f.btnCheckboxTrue);var i=h.$eval(f.btnCheckboxFalse);d=angular.isDefined(d)?d:true;i=angular.isDefined(i)?i:false;h.$watch(function(){return e.$modelValue},function(j){if(angular.equals(j,d)){g.addClass(c)}else{g.removeClass(c)}});g.bind(b,function(){h.$apply(function(){e.$setViewValue(g.hasClass(c)?i:d)})})}}}]);angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(i,b,c,e){var j=this,a=j.slides=[],f=-1,h,d;j.currentSlide=null;j.select=function(o,n){var k=a.indexOf(o);if(n===undefined){n=k>f?"next":"prev"}if(o&&o!==j.currentSlide){if(i.$currentTransition){i.$currentTransition.cancel();b(m)}else{m()}}function m(){if(j.currentSlide&&angular.isString(n)&&!i.noTransition&&o.$element){o.$element.addClass(n);o.$element[0].offsetWidth=o.$element[0].offsetWidth;angular.forEach(a,function(p){angular.extend(p,{direction:"",entering:false,leaving:false,active:false})});angular.extend(o,{direction:n,active:true,entering:true});angular.extend(j.currentSlide||{},{direction:n,leaving:true});i.$currentTransition=c(o.$element,{});(function(p,q){i.$currentTransition.then(function(){l(p,q)},function(){l(p,q)})}(o,j.currentSlide))}else{l(o,j.currentSlide)}j.currentSlide=o;f=k;g()}function l(p,q){angular.extend(p,{direction:"",active:true,leaving:false,entering:false});angular.extend(q||{},{direction:"",active:false,leaving:false,entering:false});i.$currentTransition=null}};j.indexOfSlide=function(k){return a.indexOf(k)};i.next=function(){var k=(f+1)%a.length;return j.select(a[k],"next")};i.prev=function(){var k=f-1<0?a.length-1:f-1;return j.select(a[k],"prev")};i.select=function(k){j.select(k)};i.isActive=function(k){return j.currentSlide===k};i.slides=function(){return a};i.$watch("interval",g);function g(){if(h){b.cancel(h)}function l(){if(d){i.next();g()}else{i.pause()}}var k=+i.interval;if(!isNaN(k)&&k>=0){h=b(l,k)}}i.play=function(){if(!d){d=true;g()}};i.pause=function(){d=false;if(h){b.cancel(h)}};j.addSlide=function(k,l){k.$element=l;a.push(k);if(a.length===1||k.active){j.select(a[a.length-1]);if(a.length==1){i.play()}}else{k.active=false}};j.removeSlide=function(k){var l=a.indexOf(k);a.splice(l,1);if(a.length>0&&k.active){if(l>=a.length){j.select(a[l-1])}else{j.select(a[l])}}}}]).directive("carousel",[function(){return{restrict:"EA",transclude:true,replace:true,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"="}}}]).directive("slide",[function(){return{require:"^carousel",restrict:"EA",transclude:true,replace:true,templateUrl:"template/carousel/slide.html",scope:{active:"="},link:function(c,b,a,d){d.addSlide(c,b);c.$on("$destroy",function(){d.removeSlide(c)});c.$watch("active",function(e){if(e){d.select(c)}})}}}]);angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){var b=function(f,e,d){e.removeClass("collapse");e.css({height:d});var c=e[0].offsetWidth;e.addClass("collapse")};return{link:function(i,d,h){var e;var c=true;i.$watch(function(){return d[0].scrollHeight},function(l){if(d[0].scrollHeight!==0){if(!e){if(c){b(i,d,d[0].scrollHeight+"px")}else{b(i,d,"auto")}}}});i.$watch(h.collapse,function(l){if(l){f()}else{g()}});var k;var j=function(l){if(k){k.cancel()}k=a(d,l);k.then(function(){k=undefined},function(){k=undefined});return k};var g=function(){if(c){c=false;if(!e){b(i,d,"auto")}}else{j({height:d[0].scrollHeight+"px"}).then(function(){if(!e){b(i,d,"auto")}})}e=false};var f=function(){e=true;if(c){c=false;b(i,d,0)}else{b(i,d,d[0].scrollHeight+"px");j({height:"0"})}}}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(a,c,b){a.title=b.title;a.message=b.message;a.buttons=b.buttons;a.close=function(d){c.close(d)}}]);dialogModule.provider("$dialog",function(){var b={backdrop:true,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",dialogOpenClass:"modal-open",resolve:{},backdropFade:false,dialogFade:false,keyboard:true,backdropClick:true};var a={};var c={value:0};this.options=function(d){a=d};this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(m,h,i,n,d,g,k,f,o){var j=h.find("body");function e(p){var q=angular.element("<div>");q.addClass(p);return q}function l(r){var p=this,q=this.options=angular.extend({},b,a,r);this.backdropEl=e(q.backdropClass);if(q.backdropFade){this.backdropEl.addClass(q.transitionClass);this.backdropEl.removeClass(q.triggerClass)}this.modalEl=e(q.dialogClass);if(q.dialogFade){this.modalEl.addClass(q.transitionClass);this.modalEl.removeClass(q.triggerClass)}this.handledEscapeKey=function(s){if(s.which===27){p.close();s.preventDefault();p.$scope.$apply()}};this.handleBackDropClick=function(s){p.close();s.preventDefault();p.$scope.$apply()}}l.prototype.isOpen=function(){return this._open};l.prototype.open=function(s,p){var q=this,r=this.options;if(s){r.templateUrl=s}if(p){r.controller=p}if(!(r.template||r.templateUrl)){throw new Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.")}this._loadResolves().then(function(v){var t=v.$scope=q.$scope=v.$scope?v.$scope:n.$new();q.modalEl.html(v.$template);if(q.options.controller){var u=d(q.options.controller,v);q.modalEl.contents().data("ngControllerController",u)}i(q.modalEl)(t);q._addElementsToDom();j.addClass(q.options.dialogOpenClass);setTimeout(function(){if(q.options.dialogFade){q.modalEl.addClass(q.options.triggerClass)}if(q.options.backdropFade){q.backdropEl.addClass(q.options.triggerClass)}});q._bindEvents()});this.deferred=k.defer();return this.deferred.promise};l.prototype.close=function(p){var q=this;var u=this._getFadingElements();j.removeClass(q.options.dialogOpenClass);if(u.length>0){for(var r=u.length-1;r>=0;r--){f(u[r],t).then(s)}return}this._onCloseComplete(p);function t(v){v.removeClass(q.options.triggerClass)}function s(){if(q._open){q._onCloseComplete(p)}}};l.prototype._getFadingElements=function(){var p=[];if(this.options.dialogFade){p.push(this.modalEl)}if(this.options.backdropFade){p.push(this.backdropEl)}return p};l.prototype._bindEvents=function(){if(this.options.keyboard){j.bind("keydown",this.handledEscapeKey)}if(this.options.backdrop&&this.options.backdropClick){this.backdropEl.bind("click",this.handleBackDropClick)}};l.prototype._unbindEvents=function(){if(this.options.keyboard){j.unbind("keydown",this.handledEscapeKey)}if(this.options.backdrop&&this.options.backdropClick){this.backdropEl.unbind("click",this.handleBackDropClick)}};l.prototype._onCloseComplete=function(p){this._removeElementsFromDom();this._unbindEvents();this.deferred.resolve(p)};l.prototype._addElementsToDom=function(){j.append(this.modalEl);if(this.options.backdrop){if(c.value===0){j.append(this.backdropEl)}c.value++}this._open=true};l.prototype._removeElementsFromDom=function(){this.modalEl.remove();if(this.options.backdrop){c.value--;if(c.value===0){this.backdropEl.remove()}}this._open=false};l.prototype._loadResolves=function(){var q=[],s=[],r,p=this;if(this.options.template){r=k.when(this.options.template)}else{if(this.options.templateUrl){r=m.get(this.options.templateUrl,{cache:g}).then(function(t){return t.data})}}angular.forEach(this.options.resolve||[],function(u,t){s.push(t);q.push(angular.isString(u)?o.get(u):o.invoke(u))});s.push("$template");q.push(r);return k.all(q).then(function(t){var u={};angular.forEach(t,function(w,v){u[s[v]]=w});u.dialog=p;return u})};return{dialog:function(p){return new l(p)},messageBox:function(r,q,p){return new l({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:r,message:q,buttons:p}}}})}}}]});angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location","$window",function(d,e,c){var a=null,b;return{restrict:"CA",link:function(i,h,g){i.$watch(function j(){return e.path()},function f(){if(b){b()}});h.parent().bind("click",function(k){if(b){b()}});h.bind("click",function(k){k.preventDefault();k.stopPropagation();var l=false;if(a){l=a===h;b()}if(!l){h.parent().addClass("open");a=h;b=function(m){if(m){m.preventDefault();m.stopPropagation()}d.unbind("click",b);h.parent().removeClass("open");b=null;a=null};d.bind("click",b)}})}}}]);angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(c,d){var b;var a=angular.element(document.getElementsByTagName("body")[0]);return{restrict:"EA",terminal:true,link:function(h,k,f){var i=angular.extend({},h.$eval(f.uiOptions||f.bsOptions||f.options));var j=f.modal||f.show;var e;i=angular.extend(i,{template:k.html(),resolve:{$scope:function(){return h}}});var g=d.dialog(i);k.remove();if(f.close){e=function(){c(f.close)(h)}}else{e=function(){if(angular.isFunction(c(j).assign)){c(j).assign(h,false)}}}h.$watch(j,function(m,l){if(m){g.open().then(function(){e()})}else{if(g.isOpen()){g.close()}}})}}}]);angular.module("ui.bootstrap.pagination",[]).constant("paginationConfig",{boundaryLinks:false,directionLinks:true,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last"}).directive("pagination",["paginationConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},templateUrl:"template/pagination/pagination.html",replace:true,link:function(j,d,i){var e=angular.isDefined(i.boundaryLinks)?j.$eval(i.boundaryLinks):a.boundaryLinks;var h=angular.isDefined(i.directionLinks)?j.$eval(i.directionLinks):a.directionLinks;var f=angular.isDefined(i.firstText)?i.firstText:a.firstText;var c=angular.isDefined(i.previousText)?i.previousText:a.previousText;var k=angular.isDefined(i.nextText)?i.nextText:a.nextText;var g=angular.isDefined(i.lastText)?i.lastText:a.lastText;function b(n,o,m,l){return{number:n,text:o,active:m,disabled:l}}j.$watch("numPages + currentPage + maxSize",function(){j.pages=[];var t=(j.maxSize&&j.maxSize<j.numPages)?j.maxSize:j.numPages;var p=j.currentPage-Math.floor(t/2);if(p<1){p=1}if((p+t-1)>j.numPages){p=p-((p+t-1)-j.numPages)}for(var m=p,s=p+t;m<s;m++){var q=b(m,m,j.isActive(m),false);j.pages.push(q)}if(h){var l=b(j.currentPage-1,c,false,j.noPrevious());j.pages.unshift(l);var r=b(j.currentPage+1,k,false,j.noNext());j.pages.push(r)}if(e){var n=b(1,f,false,j.noPrevious());j.pages.unshift(n);var o=b(j.numPages,g,false,j.noNext());j.pages.push(o)}if(j.currentPage>j.numPages){j.selectPage(j.numPages)}});j.noPrevious=function(){return j.currentPage===1};j.noNext=function(){return j.currentPage===j.numPages};j.isActive=function(l){return j.currentPage===l};j.selectPage=function(l){if(!j.isActive(l)&&l>0&&l<=j.numPages){j.currentPage=l;j.onSelectPage({page:l})}}}}}]);angular.module("ui.bootstrap.popover",[]).directive("popoverPopup",function(){return{restrict:"EA",replace:true,scope:{popoverTitle:"@",popoverContent:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window",function(b,a,d,e){var c='<popover-popup popover-title="{{tt_title}}" popover-content="{{tt_popover}}" placement="{{tt_placement}}" animation="tt_animation()" is-open="tt_isOpen"></popover-popup>';return{scope:true,link:function(k,j,f){var m=b(c)(k),h;f.$observe("popover",function(n){k.tt_popover=n});f.$observe("popoverTitle",function(n){k.tt_title=n});f.$observe("popoverPlacement",function(n){k.tt_placement=n||"top"});f.$observe("popoverAnimation",function(n){k.tt_animation=d(n)});k.tt_isOpen=false;function l(){var n=j[0].getBoundingClientRect();return{width:j.prop("offsetWidth"),height:j.prop("offsetHeight"),top:n.top+e.pageYOffset,left:n.left+e.pageXOffset}}function g(){var n,o,q,p;if(h){a.cancel(h)}m.css({top:0,left:0,display:"block"});j.after(m);n=l();o=m.prop("offsetWidth");q=m.prop("offsetHeight");switch(k.tt_placement){case"right":p={top:(n.top+n.height/2-q/2)+"px",left:(n.left+n.width)+"px"};break;case"bottom":p={top:(n.top+n.height)+"px",left:(n.left+n.width/2-o/2)+"px"};break;case"left":p={top:(n.top+n.height/2-q/2)+"px",left:(n.left-o)+"px"};break;default:p={top:(n.top-q)+"px",left:(n.left+n.width/2-o/2)+"px"};break}m.css(p);k.tt_isOpen=true}function i(){k.tt_isOpen=false;if(angular.isDefined(k.tt_animation)&&k.tt_animation()){h=a(function(){m.remove()},500)}else{m.remove()}}j.bind("click",function(){if(k.tt_isOpen){k.$apply(i)}else{k.$apply(g)}})}}}]);angular.module("ui.bootstrap.tabs",[]).controller("TabsController",["$scope","$element",function(d,a){var e=d.panes=[];this.select=d.select=function f(g){angular.forEach(e,function(h){h.selected=false});g.selected=true};this.addPane=function c(g){if(!e.length){d.select(g)}e.push(g)};this.removePane=function b(h){var g=e.indexOf(h);e.splice(g,1);if(h.selected&&e.length>0){d.select(e[g<e.length?g:g-1])}}}]).directive("tabs",function(){return{restrict:"EA",transclude:true,scope:{},controller:"TabsController",templateUrl:"template/tabs/tabs.html",replace:true}}).directive("pane",["$parse",function(a){return{require:"^tabs",restrict:"EA",transclude:true,scope:{heading:"@"},link:function(g,f,e,d){var b,i;g.selected=false;if(e.active){b=a(e.active);i=b.assign;g.$watch(function h(){return b(g.$parent)},function c(j){g.selected=j});g.selected=b?b(g.$parent):false}g.$watch("selected",function(j){if(j){d.select(g)}if(i){i(g.$parent,j)}});d.addPane(g);g.$on("$destroy",function(){d.removePane(g)})},templateUrl:"template/tabs/pane.html",replace:true}}]);angular.module("ui.bootstrap.tooltip",[]).directive("tooltipPopup",function(){return{restrict:"EA",replace:true,scope:{tooltipTitle:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$compile","$timeout","$parse","$window",function(b,a,d,e){var c='<tooltip-popup tooltip-title="{{tt_tooltip}}" placement="{{tt_placement}}" animation="tt_animation()" is-open="tt_isOpen"></tooltip-popup>';return{scope:true,link:function(k,j,f){var m=b(c)(k),h;f.$observe("tooltip",function(n){k.tt_tooltip=n});f.$observe("tooltipPlacement",function(n){k.tt_placement=n||"top"});f.$observe("tooltipAnimation",function(n){k.tt_animation=d(n)});k.tt_isOpen=false;function l(){var n=j[0].getBoundingClientRect();return{width:j.prop("offsetWidth"),height:j.prop("offsetHeight"),top:n.top+e.pageYOffset,left:n.left+e.pageXOffset}}function g(){var n,o,q,p;if(!k.tt_tooltip){return}if(h){a.cancel(h)}m.css({top:0,left:0,display:"block"});j.after(m);n=l();o=m.prop("offsetWidth");q=m.prop("offsetHeight");switch(k.tt_placement){case"right":p={top:(n.top+n.height/2-q/2)+"px",left:(n.left+n.width)+"px"};break;case"bottom":p={top:(n.top+n.height)+"px",left:(n.left+n.width/2-o/2)+"px"};break;case"left":p={top:(n.top+n.height/2-q/2)+"px",left:(n.left-o)+"px"};break;default:p={top:(n.top-q)+"px",left:(n.left+n.width/2-o/2)+"px"};break}m.css(p);k.tt_isOpen=true}function i(){k.tt_isOpen=false;if(angular.isDefined(k.tt_animation)&&k.tt_animation()){h=a(function(){m.remove()},500)}else{m.remove()}}j.bind("mouseenter",function(){k.$apply(g)});j.bind("mouseleave",function(){k.$apply(i)})}}}]);angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(d,e,c){var h=function(l,k,j){j=j||{};var i=d.defer();var n=h[j.animation?"animationEndEventName":"transitionEndEventName"];var m=function(o){c.$apply(function(){l.unbind(n,m);i.resolve(l)})};if(n){l.bind(n,m)}e(function(){if(angular.isString(k)){l.addClass(k)}else{if(angular.isFunction(k)){k(l)}else{if(angular.isObject(k)){l.css(k)}}}if(!n){i.resolve(l)}});i.promise.cancel=function(){if(n){l.unbind(n,m)}i.reject("Transition cancelled")};return i.promise};var f=document.createElement("trans");var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};var g={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",msTransition:"MSAnimationEnd",transition:"animationend"};function a(j){for(var i in j){if(f.style[i]!==undefined){return j[i]}}}h.transitionEndEventName=a(b);h.animationEndEventName=a(g);return h}]);angular.module("ui.bootstrap.typeahead",[]).factory("typeaheadParser",["$parse",function(b){var a=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(e){var f=e.match(a),c,d,g;if(!f){throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+e+"'.")}return{itemName:f[3],source:b(f[4]),viewMapper:b(f[2]||f[1]),modelMapper:b(f[1])}}}}]).directive("typeahead",["$compile","$q","typeaheadParser",function(d,c,b){var a=[9,13,27,38,40];return{require:"ngModel",link:function(n,h,l,i){var g=i.$modelValue;var f=n.$eval(l.typeaheadMinLength)||1;var e=b.parse(l.typeahead);var o=n.$new();n.$on("$destroy",function(){o.$destroy()});var k=function(){o.matches=[];o.activeIdx=-1};var j=function(p){var q={$viewValue:p};c.when(e.source(o,q)).then(function(s){if(p===i.$viewValue){if(s.length>0){o.activeIdx=0;o.matches.length=0;for(var r=0;r<s.length;r++){q[e.itemName]=s[r];o.matches.push({label:e.viewMapper(o,q),model:s[r]})}o.query=p}else{k()}}},k)};k();o.query=undefined;i.$parsers.push(function(p){k();if(g){return p}else{if(p&&p.length>=f){j(p)}}return undefined});i.$render=function(){var p={};p[e.itemName]=g;h.val(e.viewMapper(o,p)||i.$viewValue);g=undefined};o.select=function(p){var q={};q[e.itemName]=g=o.matches[p].model;i.$setViewValue(e.modelMapper(o,q));i.$render()};h.bind("keydown",function(p){if(o.matches.length===0||a.indexOf(p.which)===-1){return}p.preventDefault();if(p.which===40){o.activeIdx=(o.activeIdx+1)%o.matches.length;o.$digest()}else{if(p.which===38){o.activeIdx=(o.activeIdx?o.activeIdx:o.matches.length)-1;o.$digest()}else{if(p.which===13||p.which===9){o.$apply(function(){o.select(o.activeIdx)})}else{if(p.which===27){o.matches=[];o.$digest()}}}}});var m=d("<typeahead-popup matches='matches' active='activeIdx' select='select(activeIdx)' query='query'></typeahead-popup>")(o);h.after(m)}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",select:"&"},replace:true,templateUrl:"template/typeahead/typeahead.html",link:function(c,b,a){c.isOpen=function(){return c.matches.length>0};c.isActive=function(d){return c.active==d};c.selectActive=function(d){c.active=d};c.selectMatch=function(d){c.select({activeIdx:d})}}}}).filter("typeaheadHighlight",function(){return function(b,a){return(a)?b.replace(new RegExp(a,"gi"),"<strong>$&</strong>"):a}});